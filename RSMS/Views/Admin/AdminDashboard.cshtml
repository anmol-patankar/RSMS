@using RSMS.ViewModels
@{
    List<UserInfo> allUsers = ViewData["User"] as List<UserInfo>;
    List<Store> allStores = ViewData["Store"] as List<Store>;
    List<UserRoleView> allRoleMaps = ViewData["RoleMap"] as List<UserRoleView>;

}

<h1>Welcome to the Admin Dashboard</h1>
<div>
    <!-- Add dashboard content here -->
    <p>This is your admin dashboard. You can manage users, settings, etc. here.</p>

    <button id="showUsersBtn" class="toggle-btn">Show Users</button>
    <button id="showStoresBtn" class="toggle-btn">Show Stores</button>
    <button id="showRoleMapsBtn" class="toggle-btn">Show User Roles</button>

    <table id="userTable" class="data-table">
        <caption>Users</caption>
        <thead>
            <tr>
                <th>Username</th>
                <th>First Name</th>
                <th>Email</th>
                <th>Date of Birth</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var user in allUsers)
            {
                <tr>
                    <td>@user.Username</td>
                    <td>@user.FirstName</td>
                    <td>@user.Email</td>
                    <td>@user.Dob</td>
                    <td>
                        <form method="post" action="@Url.Action("DeleteUser", "Admin")">
                            <input type="hidden" name="userId" value="@user.UserId" />
                            <button type="submit" class="delete-btn">Delete</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>

    <table id="storeTable" class="data-table" style="display: none;">
        <caption>Stores</caption>
        <thead>
            <tr>
                <th>Store ID</th>
                <th>Store Name</th>
                <th>Store Rent</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var store in allStores)
            {
                <tr>
                    <td>@store.StoreId</td>
                    <td>@store.Name</td>
                    <td>@store.Rent</td>
                    <td>
                        <form method="post" action="@Url.Action("DeleteStore", "Admin")">
                            <input type="hidden" name="userId" value="@store.StoreId" />
                            <button type="submit" class="delete-btn">Delete</button>
                        </form>
                    </td>
                </tr>
            }
        </tbody>
    </table>
    <table id="roleMapTable" class="data-table" style="display: none;">
        <caption>User Roles</caption>
        <thead>
            <tr>
                <th>User ID</th>
                <th>Username</th>
                <th>Role Name</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var roleMap in allRoleMaps)
            {
                <tr>
                    <td>@roleMap.userId</td>
                    <td>@roleMap.Username</td>
                    <td>@roleMap.roleName</td>
                    @* <td>
                <form method="post" action="@Url.Action("DeleteUser", "Admin")">
                <input type="hidden" name="roleMapId" value="@roleMap.UserId" />
                <button type="submit" class="delete-btn">Delete</button>
                </form>
                </td> *@
                </tr>
            }
        </tbody>
    </table>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#showUsersBtn').click(function () {
                $('#userTable').show();
                $('#storeTable').hide();
                $('#roleMapTable').hide();
            });

            $('#showStoresBtn').click(function () {
                $('#userTable').hide();
                $('#storeTable').show();
                $('#roleMapTable').hide();
            });
            $('#showRoleMapsBtn').click(function () {
                $('#userTable').hide();
                $('#storeTable').hide();
                $('#roleMapTable').show();
            });
        });
    </script>
}
